import{d as I,r as f,o as r,c as d,a as e,j as k,t as m,g as v,v as g,h as w,_ as O,u as A,e as T,p as j,m as y,w as U,n as q,q as B,F as N,b as D,s as z,f as E}from"./index-CoUEsawU.js";import{u as R}from"./bookingStore-BP1HVpkc.js";const F={class:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50"},L={class:"max-w-md w-full mx-4 card animate-slide-up"},Y={class:"flex justify-between items-center mb-6"},G={class:"space-y-6"},H={class:"bg-background-light p-4 rounded-lg"},J={class:"font-medium text-text"},K={class:"space-y-4"},Q={class:"form-group"},W={class:"relative"},X={class:"grid grid-cols-2 gap-4"},Z={class:"form-group"},ee={class:"form-group"},te={class:"flex space-x-4"},se=["disabled"],le={class:"flex items-center justify-center gap-2"},oe={key:0},ae={key:1},ne={key:2,class:"transform transition-transform group-hover:translate-x-1"},re=["disabled"],ie={key:0,class:"absolute inset-0 bg-background-card/50 backdrop-blur-sm rounded-lg flex items-center justify-center"},ue=I({__name:"PaymentModal",props:{amount:{}},emits:["success","close"],setup(h,{emit:_}){const P=h,x=_,n=f(!1),o=f(""),p=f(""),c=f(""),$=()=>{o.value=o.value.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim()},a=()=>{p.value=p.value.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2")},b=async()=>{n.value=!0,await new Promise(i=>setTimeout(i,1500)),n.value=!1,x("success")};return(i,s)=>(r(),d("div",F,[e("div",L,[e("div",Y,[s[5]||(s[5]=e("h2",{class:"text-xl font-bold text-text flex items-center gap-2"},[e("span",{class:"text-primary-light"},"ðŸ’³"),k(" Payment Details ")],-1)),e("button",{onClick:s[0]||(s[0]=u=>i.$emit("close")),class:"text-text-muted hover:text-primary-light transition-colors"}," âœ• ")]),e("div",G,[e("div",H,[e("p",J,"Deposit Amount: $"+m(P.amount),1),s[6]||(s[6]=e("p",{class:"text-sm text-text-muted"},"10% of total booking amount",-1))]),e("div",K,[e("div",Q,[s[8]||(s[8]=e("label",{class:"form-label"},"Card Number",-1)),e("div",W,[v(e("input",{type:"text",class:"input-field w-full pl-10",placeholder:"4242 4242 4242 4242",maxlength:"19","onUpdate:modelValue":s[1]||(s[1]=u=>o.value=u),onInput:$},null,544),[[g,o.value]]),s[7]||(s[7]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-primary-light"}," ðŸ’³ ",-1))])]),e("div",X,[e("div",Z,[s[9]||(s[9]=e("label",{class:"form-label"},"Expiry",-1)),v(e("input",{type:"text",class:"input-field w-full",placeholder:"MM/YY",maxlength:"5","onUpdate:modelValue":s[2]||(s[2]=u=>p.value=u),onInput:a},null,544),[[g,p.value]])]),e("div",ee,[s[10]||(s[10]=e("label",{class:"form-label"},"CVC",-1)),v(e("input",{type:"text",class:"input-field w-full",placeholder:"123",maxlength:"3","onUpdate:modelValue":s[3]||(s[3]=u=>c.value=u)},null,512),[[g,c.value]])])])]),e("div",te,[e("button",{onClick:b,class:"btn-primary flex-grow group",disabled:n.value},[e("span",le,[n.value?(r(),d("span",oe,"Processing...")):(r(),d("span",ae,"Pay Deposit")),n.value?w("",!0):(r(),d("span",ne,"â†’"))])],8,se),e("button",{onClick:s[4]||(s[4]=u=>i.$emit("close")),class:"btn-secondary",disabled:n.value}," Cancel ",8,re)])]),n.value?(r(),d("div",ie,s[11]||(s[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)]))):w("",!0)])]))}}),de=O(ue,[["__scopeId","data-v-c2ac0976"]]),me={class:"container mx-auto px-4 py-8"},pe={class:"max-w-2xl mx-auto card"},ce={class:"page-title flex items-center justify-center gap-3"},fe={class:"form-group"},ve=["min"],be={class:"form-group"},ye=["value"],xe={class:"form-group"},ge=["value","disabled"],_e={class:"bg-background-light p-6 rounded-lg space-y-4"},Pe={class:"space-y-3 text-text-muted"},$e={class:"flex justify-between"},ke={class:"text-text"},we={class:"flex justify-between"},he={class:"text-text"},Me={class:"flex justify-between font-medium"},Se={class:"text-primary-light"},Be=I({__name:"BookingView",setup(h){const _=T(),P=E(),x=R(),n=A(),o=x.getGameById(Number(_.params.gameId)),p=new Date().toISOString().split("T")[0],c=f(!1),$=["10:00 AM","11:30 AM","1:00 PM","2:30 PM","4:00 PM","5:30 PM","7:00 PM","8:30 PM"],a=f({date:"",time:"",numberOfPlayers:""}),b=j(()=>a.value.numberOfPlayers?Number(a.value.numberOfPlayers)*((o==null?void 0:o.pricePerPerson)||0):0),i=j(()=>Math.round(b.value*.1*100)/100),s=()=>{n.currentPlayer&&(c.value=!0)},u=()=>{!n.currentPlayer||!o||(x.createBooking({gameId:o.id,date:a.value.date,time:a.value.time,numberOfPlayers:Number(a.value.numberOfPlayers),totalAmount:b.value,depositAmount:i.value,playerId:n.currentPlayer.id,paymentStatus:"deposit_paid"}),n.addPoints(Math.floor(i.value/10)),P.push("/dashboard"))};return(Ce,t)=>{var M,S,C;return r(),d("div",me,[e("div",pe,[e("h1",ce,[t[4]||(t[4]=e("span",{class:"text-primary-light"},"ðŸŽ²",-1)),e("span",null,"Book "+m((M=y(o))==null?void 0:M.name),1)]),e("form",{onSubmit:U(s,["prevent"]),class:"space-y-6"},[e("div",fe,[t[5]||(t[5]=e("label",{class:"form-label"},"Date",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=l=>a.value.date=l),required:"",class:q(["input-field w-full appearance-none",{"cursor-pointer":!0}]),min:y(p),style:{"color-scheme":"dark"}},null,8,ve),[[g,a.value.date]])]),e("div",be,[t[7]||(t[7]=e("label",{class:"form-label"},"Time",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.time=l),required:"",class:"input-field w-full"},[t[6]||(t[6]=e("option",{value:"",disabled:""},"Select a time",-1)),(r(),d(N,null,D($,l=>e("option",{key:l,value:l},m(l),9,ye)),64))],512),[[B,a.value.time]])]),e("div",xe,[t[9]||(t[9]=e("label",{class:"form-label"},"Number of Players",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.numberOfPlayers=l),required:"",class:"input-field w-full"},[t[8]||(t[8]=e("option",{value:"",disabled:""},"Select number of players",-1)),(r(!0),d(N,null,D(((S=y(o))==null?void 0:S.maxPlayers)||5,l=>{var V;return r(),d("option",{key:l,value:l,disabled:l<(((V=y(o))==null?void 0:V.minPlayers)||2)},m(l)+" players ",9,ge)}),128))],512),[[B,a.value.numberOfPlayers]])]),e("div",_e,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-text flex items-center gap-2"},[e("span",{class:"text-primary-light"},"ðŸ’°"),k(" Booking Summary ")],-1)),e("div",Pe,[e("div",$e,[t[10]||(t[10]=e("span",null,"Price per person:",-1)),e("span",ke,"$"+m((C=y(o))==null?void 0:C.pricePerPerson),1)]),e("div",we,[t[11]||(t[11]=e("span",null,"Total amount:",-1)),e("span",he,"$"+m(b.value),1)]),e("div",Me,[t[12]||(t[12]=e("span",null,"Required deposit (10%):",-1)),e("span",Se,"$"+m(i.value),1)])])]),t[14]||(t[14]=e("button",{type:"submit",class:"btn-primary w-full group relative overflow-hidden"},[e("span",{class:"relative z-10 flex items-center justify-center gap-2"},[k(" Continue to Payment "),e("span",{class:"transform transition-transform group-hover:translate-x-1"},"â†’")])],-1))],32)]),c.value?(r(),z(de,{key:0,amount:i.value,onSuccess:u,onClose:t[3]||(t[3]=l=>c.value=!1)},null,8,["amount"])):w("",!0)])}}});export{Be as default};
